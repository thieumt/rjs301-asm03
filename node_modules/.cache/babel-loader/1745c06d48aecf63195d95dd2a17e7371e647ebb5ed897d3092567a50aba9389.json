{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thieu\\\\Desktop\\\\data course\\\\RJS-Asm-03\\\\app\\\\src\\\\component\\\\componentB\\\\LiveChat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { showChatLive, hideChatLive } from \"../../store/store\";\nimport { faMessage } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport \"./LiveChat.css\";\n// import { io } from \"socket.io-client\";\n// const socket = io(\"http://localhost:5000\", { transports: [\"websocket\"] });\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveChat = () => {\n  _s();\n  const [message, setMessage] = useState({\n    chat: \"\"\n  });\n  const [messages, setMessages] = useState([]);\n  const [errorInput, setErrorInput] = useState(false);\n  const [newMess, setNewMess] = useState(false);\n  const isMessage = useSelector(state => state.chat.isChatLive);\n  const dispatch = useDispatch();\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (value.length === 0) {\n      setMessage(val => ({\n        ...val,\n        [name]: value\n      }));\n    } else {\n      setMessage(val => ({\n        ...val,\n        [name]: value\n      }));\n      setErrorInput(false);\n    }\n  };\n  const sendMessage = e => {\n    e.preventDefault();\n    let valid = false;\n    if (message.chat === \"\") {\n      setErrorInput(true);\n      valid = true;\n    } else {\n      setErrorInput(false);\n      valid = false;\n    }\n    if (!valid) {\n      const data = {\n        message: message.chat,\n        user: \"kh\"\n      };\n      setMessages(messages => [...messages, data]);\n      // socket.emit(\"message\", { message: message.chat, user: \"kh\" });\n\n      setMessage({\n        chat: \"\"\n      });\n    }\n  };\n\n  // socket.on(\"receiver_message\", (data) => {\n  //   setNewMess(true);\n  //   setTimeout(() => {\n  //     setMessages((messages) => [...messages, data]);\n  //   }, 1000);\n  // });\n\n  useEffect(() => {\n    setTimeout(() => {\n      setNewMess(false);\n    }, 1000);\n  }, [newMess]);\n\n  // handle show or hiden popup\n  const handleMessage = () => {\n    if (isMessage === true) {\n      dispatch(hideChatLive());\n    } else {\n      dispatch(showChatLive());\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat_app\",\n    children: [isMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat_container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat_content-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"chat_title\",\n          children: \"chat live\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"chat_btn-mess-close\",\n          onClick: () => {\n            dispatch(hideChatLive());\n          },\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat_content\",\n          children: messages && messages.map((message, index) => message.user === \"kh\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"chat_content-kh\",\n            children: [\"You:\", message.message]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"chat_content-admin\",\n            children: [\"Admin: \", message.message]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat_form\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: sendMessage,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"chat\",\n              placeholder: \"Message...\",\n              value: message.chat,\n              onChange: handleChange,\n              className: \"chat_form-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chat_form-btn\",\n              onClick: sendMessage,\n              type: \"submit\",\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), errorInput && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"chat_error-input\",\n            children: \"Enter your input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"chat_btn-mess-on\",\n      onClick: handleMessage,\n      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveChat, \"KoiHAoXWCHdsSTtZOUrd5FP0WVM=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = LiveChat;\nexport default LiveChat;\nvar _c;\n$RefreshReg$(_c, \"LiveChat\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","showChatLive","hideChatLive","faMessage","FontAwesomeIcon","jsxDEV","_jsxDEV","LiveChat","_s","message","setMessage","chat","messages","setMessages","errorInput","setErrorInput","newMess","setNewMess","isMessage","state","isChatLive","dispatch","handleChange","e","name","value","target","length","val","sendMessage","preventDefault","valid","data","user","setTimeout","handleMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","map","index","onSubmit","placeholder","onChange","icon","_c","$RefreshReg$"],"sources":["C:/Users/thieu/Desktop/data course/RJS-Asm-03/app/src/component/componentB/LiveChat.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { showChatLive, hideChatLive } from \"../../store/store\";\r\nimport { faMessage } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport \"./LiveChat.css\";\r\n// import { io } from \"socket.io-client\";\r\n// const socket = io(\"http://localhost:5000\", { transports: [\"websocket\"] });\r\n\r\nconst LiveChat = () => {\r\n  const [message, setMessage] = useState({\r\n    chat: \"\",\r\n  });\r\n\r\n  const [messages, setMessages] = useState([]);\r\n  const [errorInput, setErrorInput] = useState(false);\r\n  const [newMess, setNewMess] = useState(false);\r\n\r\n  const isMessage = useSelector((state) => state.chat.isChatLive);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (value.length === 0) {\r\n      setMessage((val) => ({ ...val, [name]: value }));\r\n    } else {\r\n      setMessage((val) => ({ ...val, [name]: value }));\r\n      setErrorInput(false);\r\n    }\r\n  };\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n\r\n    let valid = false;\r\n    if (message.chat === \"\") {\r\n      setErrorInput(true);\r\n      valid = true;\r\n    } else {\r\n      setErrorInput(false);\r\n      valid = false;\r\n    }\r\n\r\n    if (!valid) {\r\n      const data = {\r\n        message: message.chat,\r\n        user: \"kh\",\r\n      };\r\n      setMessages((messages) => [...messages, data]);\r\n      // socket.emit(\"message\", { message: message.chat, user: \"kh\" });\r\n\r\n      setMessage({\r\n        chat: \"\",\r\n      });\r\n    }\r\n  };\r\n\r\n  // socket.on(\"receiver_message\", (data) => {\r\n  //   setNewMess(true);\r\n  //   setTimeout(() => {\r\n  //     setMessages((messages) => [...messages, data]);\r\n  //   }, 1000);\r\n  // });\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setNewMess(false);\r\n    }, 1000);\r\n  }, [newMess]);\r\n\r\n  // handle show or hiden popup\r\n  const handleMessage = () => {\r\n    if (isMessage === true) {\r\n      dispatch(hideChatLive());\r\n    } else {\r\n      dispatch(showChatLive());\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"chat_app\">\r\n      {isMessage ? (\r\n        <div className=\"chat_container\">\r\n          <div className=\"chat_content-main\">\r\n            <h3 className=\"chat_title\">chat live</h3>\r\n            <button\r\n              type=\"button\"\r\n              className=\"chat_btn-mess-close\"\r\n              onClick={() => {\r\n                dispatch(hideChatLive());\r\n              }}\r\n            >\r\n              X\r\n            </button>\r\n            <div className=\"chat_content\">\r\n              {messages &&\r\n                messages.map((message, index) =>\r\n                  message.user === \"kh\" ? (\r\n                    <p key={index} className=\"chat_content-kh\">\r\n                      You:\r\n                      {message.message}\r\n                    </p>\r\n                  ) : (\r\n                    <p key={index} className=\"chat_content-admin\">\r\n                      Admin: {message.message}\r\n                    </p>\r\n                  )\r\n                )}\r\n            </div>\r\n            <div className=\"chat_form\">\r\n              <form onSubmit={sendMessage}>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"chat\"\r\n                  placeholder=\"Message...\"\r\n                  value={message.chat}\r\n                  onChange={handleChange}\r\n                  className=\"chat_form-input\"\r\n                />\r\n                <button\r\n                  className=\"chat_form-btn\"\r\n                  onClick={sendMessage}\r\n                  type=\"submit\"\r\n                >\r\n                  Send\r\n                </button>\r\n              </form>\r\n              {errorInput && (\r\n                <p className=\"chat_error-input\">Enter your input</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      <button\r\n        type=\"button\"\r\n        className=\"chat_btn-mess-on\"\r\n        onClick={handleMessage}\r\n      >\r\n        <FontAwesomeIcon icon={faMessage} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}