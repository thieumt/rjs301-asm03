{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thieu\\\\Desktop\\\\data course\\\\RJS-Asm-03\\\\app\\\\src\\\\pages\\\\order\\\\OrderPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"./OrderPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderPage = () => {\n  _s();\n  const [listOrder, setListOrder] = useState([]);\n  useEffect(() => {\n    const listUpdate = JSON.parse(localStorage.getItem(\"listPlaceOrder\")) || [];\n    setListOrder(listUpdate);\n\n    // Event change to localStorage\n    window.addEventListener(\"storage\", () => {\n      const listUpdate = JSON.parse(localStorage.getItem(\"listPlaceOrder\")) || [];\n      setListOrder(listUpdate);\n    });\n\n    // clean event\n    return () => window.removeEventListener(\"storage\", () => {});\n  }, []);\n  const userLogin = useSelector(state => state.user.userEmail);\n  const [placeOrder, setPlaceOrder] = useState([]);\n  useEffect(() => {\n    if (listOrder.length > 0) {\n      const order = listOrder.filter(item => {\n        return item.email === userLogin;\n      });\n      setPlaceOrder(order);\n    }\n  }, [userLogin, listOrder]);\n  const totalPricesOrdered = () => {\n    let productPrice = 0;\n    placeOrder.forEach(user => {\n      user.product.forEach(item => {\n        const price = parseInt(item.price) * parseInt(item.quantity);\n        productPrice += price;\n      });\n    });\n    return productPrice;\n  };\n\n  // format price\n  const formatPrice = prices => {\n    if (typeof prices !== \"undefined\") {\n      const formattedPrice = prices.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n      return formattedPrice;\n    }\n    return \"\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order_cp\",\n    children: placeOrder && placeOrder.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order_cp-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ordered\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order_cp-order\",\n        children: placeOrder.map(user => {\n          return user.product.map((item, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order_cp-order-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"order_cp-order-item-name\",\n                children: [item.name, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"order_cp-order-item-price\",\n                children: [formatPrice(item.price), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"order_cp-order-item-price-value \",\n                  children: [\"VND x \", item.quantity]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this);\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order_cp-total\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"order_cp-total-title\",\n          children: \"total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"order_cp-total-price\",\n          children: [formatPrice(totalPricesOrdered()), \" VND\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Khong tim thay order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderPage, \"1wYEpJ3D9likI7y5URNMCZLfaiQ=\", false, function () {\n  return [useSelector];\n});\n_c = OrderPage;\nexport default OrderPage;\nvar _c;\n$RefreshReg$(_c, \"OrderPage\");","map":{"version":3,"names":["React","useEffect","useState","useSelector","jsxDEV","_jsxDEV","OrderPage","_s","listOrder","setListOrder","listUpdate","JSON","parse","localStorage","getItem","window","addEventListener","removeEventListener","userLogin","state","user","userEmail","placeOrder","setPlaceOrder","length","order","filter","item","email","totalPricesOrdered","productPrice","forEach","product","price","parseInt","quantity","formatPrice","prices","formattedPrice","toString","replace","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","index","name","_c","$RefreshReg$"],"sources":["C:/Users/thieu/Desktop/data course/RJS-Asm-03/app/src/pages/order/OrderPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"./OrderPage.css\";\r\n\r\nconst OrderPage = () => {\r\n\r\n  const [listOrder, setListOrder] = useState([]);\r\n  useEffect(() => {\r\n    const listUpdate = JSON.parse(localStorage.getItem(\"listPlaceOrder\")) || [];\r\n    setListOrder(listUpdate);\r\n\r\n    // Event change to localStorage\r\n    window.addEventListener(\"storage\", () => {\r\n      const listUpdate = JSON.parse(localStorage.getItem(\"listPlaceOrder\")) || [];\r\n      setListOrder(listUpdate);\r\n    });\r\n\r\n    // clean event\r\n    return () => window.removeEventListener(\"storage\", () => {});\r\n  }, []);\r\n\r\n  const userLogin = useSelector((state) => state.user.userEmail);\r\n  const [placeOrder, setPlaceOrder] = useState([]);\r\n\r\n     useEffect(() => {\r\n    if (listOrder.length > 0) {\r\n      const order = listOrder.filter((item) => {\r\n        return item.email === userLogin;\r\n      });\r\n\r\n      setPlaceOrder(order);\r\n    }\r\n     }, [userLogin, listOrder]);\r\n   \r\n  const totalPricesOrdered = () => {\r\n    let productPrice = 0;\r\n    placeOrder.forEach((user) => {\r\n      user.product.forEach((item) => {\r\n        const price = parseInt(item.price) * parseInt(item.quantity);\r\n        productPrice += price;\r\n      });\r\n    });\r\n    return productPrice;\r\n  };\r\n\r\n\r\n  // format price\r\n  const formatPrice = (prices) => {\r\n    if (typeof prices !== \"undefined\") {\r\n      const formattedPrice = prices\r\n        .toString()\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n      return formattedPrice;\r\n    }\r\n    return \"\";\r\n  };\r\n  return (\r\n    <div className=\"order_cp\">\r\n      {placeOrder && placeOrder.length > 0 ? (\r\n        <div className=\"order_cp-content\">\r\n              <h3>Ordered</h3>\r\n              \r\n              <div className=\"order_cp-order\">\r\n            {placeOrder.map((user) => {\r\n              return user.product.map((item, index) => {\r\n                return (\r\n                  <div className=\"order_cp-order-item\" key={index}>\r\n                    <span className=\"order_cp-order-item-name\">\r\n                      {item.name}:\r\n                    </span>\r\n                    <span className=\"order_cp-order-item-price\">\r\n                      {formatPrice(item.price)}\r\n                      <span className=\"order_cp-order-item-price-value \">\r\n                        VND x {item.quantity}\r\n                      </span>\r\n                    </span>\r\n                  </div>\r\n                );\r\n              });\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"order_cp-total\">\r\n            <span className=\"order_cp-total-title\">total</span>\r\n            <span className=\"order_cp-total-price\">\r\n              {formatPrice(totalPricesOrdered())} VND\r\n            </span>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>Khong tim thay order</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}